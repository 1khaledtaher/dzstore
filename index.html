<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>DZ Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="navbar">
  <span style="font-weight:bold">DZ Store</span>
  <div class="nav-links">
    <a class="nav-link" data-section="home" href="#home">الرئيسية</a>
    <a class="nav-link" data-section="shop" href="#shop">المتجر</a>
    <a class="nav-link" data-section="favorites" href="#favorites">المفضلة <span id="fav-count"></span></a>
    <a class="nav-link" data-section="cart" href="#cart">السلة <span id="cart-count"></span></a>
    <a class="nav-link" data-section="orders" href="#orders">طلباتي</a>
    <a class="nav-link" data-section="profile" href="#profile">حسابي</a>
    <a class="nav-link" data-section="about" href="#about">عن المتجر</a>
  </div>
  <span class="hamburger">☰</span>
  <button id="auth-btn"><span id="auth-text">تسجيل الدخول</span></button>
</div>

<div id="loading-overlay">جاري التحميل...</div>
<div id="toast-container"></div>

<div class="container">

  <!-- الرئيسية -->
  <div id="home-section" class="page-section">
    <h2>مرحباً بك في متجرنا</h2>
    <div id="home-greeting"></div>
    <h3>المنتجات المميزة</h3>
    <div id="featured-products-grid" class="products-grid"></div>
    <button id="show-all-featured">عرض جميع المنتجات</button>
  </div>

  <!-- المتجر -->
  <div id="shop-section" class="page-section">
    <h2>كل المنتجات</h2>
    <div style="margin-bottom:16px;">
      <select id="shop-category-filter"></select>
      <select id="shop-sort-filter">
        <option value="default">الترتيب الافتراضي</option>
        <option value="price-low">الأقل سعراً</option>
        <option value="price-high">الأعلى سعراً</option>
      </select>
      <select id="shop-type-filter">
        <option value="flat">قائمة المنتجات</option>
        <option value="categories">حسب التصنيفات</option>
      </select>
      <input id="shop-search-filter" placeholder="ابحث عن منتج...">
    </div>
    <div id="shop-products-grid" class="products-grid"></div>
  </div>

  <!-- المفضلة -->
  <div id="favorites-section" class="page-section">
    <h2>المفضلة</h2>
    <div id="favorites-grid" class="products-grid"></div>
  </div>

  <!-- السلة -->
  <div id="cart-section" class="page-section">
    <h2>سلة التسوق</h2>
    <div id="cart-items"></div>
    <div style="margin-top:14px;">
      <input id="coupon-code" placeholder="كود الخصم (إن وجد)">
      <button id="apply-coupon">تطبيق الكوبون</button>
      <div>
        <p>الإجمالي: <span id="cart-total">0</span> جنيه</p>
        <div id="discount-row" style="display:none;">
          <p>بعد الخصم: <span id="cart-discounted-total">0</span> جنيه</p>
        </div>
      </div>
      <button id="checkout-btn">إتمام الطلب</button>
    </div>
  </div>

  <!-- الطلبات -->
  <div id="orders-section" class="page-section">
    <h2>طلباتي</h2>
    <div id="orders-list"></div>
  </div>

  <!-- الحساب الشخصي -->
  <div id="profile-section" class="page-section">
    <h2>حسابي</h2>
    <img id="profile-avatar-img" src="" style="width:96px; border-radius:50%; margin-bottom:12px;">
    <div><strong>الاسم:</strong> <span id="profile-fullname"></span></div>
    <div><strong>البريد:</strong> <span id="profile-email"></span></div>
    <div><strong>تاريخ الإنشاء:</strong> <span id="profile-date"></span></div>
    <button id="edit-profile-btn">تعديل البيانات</button>
    <button id="refresh-profile-btn" style="display:none;">تحديث البيانات</button>
    <button id="logout-btn">تسجيل الخروج</button>
  </div>

  <!-- عن المتجر -->
  <div id="about-section" class="page-section">
    <h2>عن المتجر</h2>
    <p>متجر إلكتروني بسيط تجريبي مبني بـ Firebase و JavaScript</p>
  </div>
</div>

<!-- نافذة المنتج -->
<div id="product-modal" class="modal">
  <div class="modal-content" style="min-width:280px;">
    <span id="close-product-modal" style="float:left;cursor:pointer;">✕</span>
    <img id="modal-product-img" src="" style="width: 100%; margin-bottom:10px;">
    <h3 id="modal-product-name"></h3>
    <p id="modal-product-desc"></p>
    <div id="modal-product-extra"></div>
    <button id="modal-add-cart">أضف للسلة</button>
    <button id="modal-add-fav">☆ أضف للمفضلة</button>
  </div>
</div>

<!-- نافذة إكمال البيانات -->
<div id="profile-complete-modal" class="modal">
  <div class="modal-content">
    <h3>يرجى إكمال بياناتك الشخصية</h3>
    <form id="profile-complete-form">
      <input id="full-name-input" placeholder="الاسم الكامل" required><br>
      <input id="phone-input" placeholder="رقم الهاتف" required><br>
      <input id="phone2-input" placeholder="رقم هاتف إضافي (اختياري)"><br>
      <input id="address-input" placeholder="العنوان الكامل" required><br>
      <input id="landmark-input" placeholder="علامة مميزة بالقرب منك"><br>
      <button type="submit">حفظ</button>
      <button type="button" id="skip-profile-btn">تخطي</button>
    </form>
  </div>
</div>

<!-- نافذة تسجيل الدخول / إنشاء حساب -->
<div id="auth-modal" class="modal">
  <div class="modal-content" style="min-width:300px;">
    <span style="float:left;cursor:pointer;" onclick="document.getElementById('auth-modal').classList.remove('open')">✕</span>
    <div id="login-form">
      <h3>تسجيل الدخول</h3>
      <input id="login-email" placeholder="البريد الإلكتروني"><br>
      <input id="login-password" type="password" placeholder="كلمة المرور"><br>
      <button id="login-btn">دخول</button>
      <div style="margin:10px 0;">
        <button id="google-signin-btn">دخول بـ Google</button>
      </div>
      <a href="#" id="show-signup">ليس لديك حساب؟ إنشاء حساب جديد</a>
    </div>
    <div id="signup-form" class="hidden">
      <h3>إنشاء حساب</h3>
      <input id="signup-email" placeholder="البريد الإلكتروني"><br>
      <input id="signup-password" type="password" placeholder="كلمة المرور"><br>
      <button id="signup-btn">تسجيل</button>
      <div style="margin:10px 0;">
        <button id="google-signup-btn">تسجيل بـ Google</button>
      </div>
      <a href="#" id="show-login">لديك حساب؟ تسجيل الدخول</a>
    </div>
  </div>
</div>

<script src="script.js" type="module"></script>
<!-- لاحظ: لم نضف share-modal.js ولا أي سكربت للطباعة هنا -->

</body>
</html>
